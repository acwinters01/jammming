const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SearchResults-B1E1kRLt.js","assets/index-R5YN88vi.js","assets/index-BXyZoNpc.css","assets/DuplicateTrackModal-ByzZPm5y.js"])))=>i.map(i=>d[i]);
import{r as t,j as s,T as B,S as V,_ as R}from"./index-R5YN88vi.js";const F=t.lazy(()=>R(()=>import("./SearchResults-B1E1kRLt.js"),__vite__mapDeps([0,1,2]))),H=t.lazy(()=>R(()=>import("./DuplicateTrackModal-ByzZPm5y.js"),__vite__mapDeps([3,1,2])));function G({existingPlaylist:b,selectedPlaylist:l,setTracksEdited:i,trackEdited:v,onEdit:P,handleExitEditMode:p,onNameChange:_,setSearchLoading:K,tracksEdited:o}){const a=b[l],[w,S]=t.useState(!1),[D,m]=t.useState(null),[,g]=t.useState(!1),[x,k]=t.useState(a?a.playlistName:""),[E,A]=t.useState([]),L=10,[,q]=t.useState({}),d=t.useRef(null),h=t.useRef(null),y=t.useRef(null),f=t.useCallback(()=>{y.current&&(y.current.offsetWidth<932?d.current&&h.current&&(d.current.offsetHeight>200?h.current.classList.add("large-height"):h.current.classList.remove("large-height")):h.current.classList.remove("large-height"))},[]);t.useEffect(()=>{f(),window.addEventListener("resize",f);const e=new MutationObserver(f);return d.current&&e.observe(d.current,{childList:!0,subtree:!0}),()=>{window.removeEventListener("resize",f),e.disconnect()}},[f]),t.useEffect(()=>{a?(k(a.playlistName),i(a.tracks)):console.log("Selected Playlist Obj is undefined"),a.tracks.forEach(e=>{e.id})},[a,i]);const I=()=>{l&&(P(l,o),_(x,l),p())},O=e=>{$(e),g(!1),m(null)},T=()=>{g(!1),m(null)},C=()=>{S(!1)},W=t.useCallback(e=>{A(e||[])},[]),$=t.useCallback(e=>{const n=e.id;q(r=>{const c={...r};c[n]=(c[n]||1)+1;const u=`${n}-${c[n]}`,z={...e,uniqueKey:u};return setTimeout(()=>{i(j=>j.some(M=>M.uniqueKey===u)?j:[z,...j])},0),c})},[i]),N=t.useCallback(e=>{const n=e.id;if(o.some(u=>u.id===n)){m(e),g(!0);return}const c={...e,uniqueKey:`${n}-1`};i(u=>[c,...u])},[o,i,g]);return s.jsxs("div",{className:"displayEditingPlaylist",ref:y,children:[s.jsx("div",{className:"spacer"}),s.jsx("div",{className:"editingSection",ref:h,children:l!==null&&s.jsxs("div",{className:"EditingPlaylist",id:`EditingPlaylist-${a.playlistId}`,children:[s.jsxs("div",{className:"editingMainContainer",children:[w?s.jsx("input",{type:"text",value:x,onChange:e=>k(e.target.value),onBlur:C,onKeyDown:e=>e.key==="Enter"&&C(),autoFocus:!0}):s.jsx("h3",{onClick:()=>S(!0),children:`Editing: ${x}`}),s.jsxs("div",{className:"editingButtons",children:[s.jsx("button",{onClick:I,children:"Save"}),s.jsx("button",{onClick:p,children:"Cancel"})]})]}),s.jsx(B,{keyPrefix:"editing",tracks:o,onAdd:N,onRemove:e=>i(n=>n.filter(r=>r.uniqueKey!==e.uniqueKey)),tracksEdited:o,tracksPerPage:10,allowDuplicateAdd:!1},l+1),s.jsx(t.Suspense,{children:s.jsx(H,{track:D,onConfirm:O,onCancel:T})})]})}),s.jsx("div",{className:"editingSearch",ref:d,children:s.jsxs("div",{className:"searchForNewTracks",children:[s.jsx("h3",{children:"Search"}),s.jsx(V,{onSearchResults:W,setSearchLoading:K}),s.jsx(t.Suspense,{children:s.jsx(F,{tracks:E,keyPrefix:"editing-",onAdd:N,onRemove:e=>i(n=>n.filter(r=>r.uniqueKey!==e.uniqueKey)),tracksEdited:v,selectedPlaylist:l,playlistTracks:v,allowDuplicateAdd:!1,tracksPerPage:L})})]})})]})}export{G as default};
