import{i,a as l}from"./index-DHzO0Nh3.js";const f=()=>{try{return localStorage.getItem("access_token")}catch(r){console.error("Token not here",r)}},n=async(r,o="GET",a=null,p)=>{let t=await f();if(i()&&(console.log("Access token expired. Attempting to refresh"),t=await l(),!t))throw new Error("Unable to refresh access token. ");if(!t)throw new Error("No access token available. Please login.");const s={method:o,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}};a&&o!=="GET"&&(s.body=JSON.stringify(a));try{const e=await fetch(`https://api.spotify.com/v1/${r}`,s);if(!e.ok){const c=await e.json();throw new Error(`Spotify API Error: ${c.error.message}`)}return await e.json()}catch(e){console.error("Error making Spotify request:",e)}finally{}},y=async()=>{try{return await n("me")}catch(r){console.error("Error fetching user profile:",r)}},g=async()=>{try{return await n("me/playlists")}catch(r){console.error("Error fetching playlists:",r)}};export{g as a,y as g,n as m};
